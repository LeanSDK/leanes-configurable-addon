"use strict";var t=function(t,e,r,n){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})};var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};var r=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n((function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e}));var o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)},c=n((function(t){function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(r)}t.exports=e}));var a=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?r(t):e},u=n((function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(r)}t.exports=e}));var f=function(t,e,r,n,i){var o={};return Object.keys(n).forEach((function(t){o[t]=n[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o};function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t};var p=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t},y=n((function(t){function e(r,n,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=e=Reflect.get:t.exports=e=function(t,e,r){var n=p(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}},e(r,n,i||r)}t.exports=e}));function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}var g={}.hasOwnProperty;function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}var v={}.hasOwnProperty;function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}module.exports=function(n){var i=n.NS,c=i.initializeMixin,a=i.meta,l=i.constant,p=i.extend;return["ConfigurableAddon",function(n){var i,w,P,j,D,_;return p("ConfigurableFacadeMixin","Facade")(i=function(t){var r=t.NS,n=r.CONFIGURATION,i=r.initializeMixin,c=r.meta,a=r.method;r.Utils._,t.defineMixin("/mixins/ConfigurableFacadeMixin.js",(function(t){var r,l,p,b,g;return i((g=b=function(t){o(i,t);var r=m(i);function i(){return e(this,i),r.apply(this,arguments)}return s(i,[{key:"initializeFacade",value:function(){y(u(i.prototype),"initializeFacade",this).apply(this,arguments),this.addProxy(n,"Configuration",this.Module.NS.ROOT)}}]),i}(t),b.object={},f(l=g,"object",[c],(p=(p=Object.getOwnPropertyDescriptor(l,"object"))?p.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return p}}),l),f(l.prototype,"initializeFacade",[a],Object.getOwnPropertyDescriptor(l.prototype,"initializeFacade"),l.prototype),r=l))||r}))}(i=function(t){var r=t.NS,n=r.assert,i=r.initializeMixin,c=r.meta,a=r.property,u=r.method,l=r.Utils,p=l._,y=l.assign;t.defineMixin("/mixins/MemoryConfigurationMixin.js",(function(t){var r,l,b,g,d;return i((d=g=function(t){o(i,t);var r=h(i);function i(){return e(this,i),r.apply(this,arguments)}return s(i,[{key:"defineConfigProperties",value:function(){var t=this,e="".concat(this.root,"/").concat(this.manifestPath),r=this.ApplicationModule.require(e);this._name=r.name,this._description=r.description,this._license=r.license,this._version=r.version,this._keywords=r.keywords;var i=r.configuration,o=y({},i,this.getData());for(var c in o)v.call(o,c)&&function(e,r){switch(n(null!=r.description,"Description in config definition is required"),n(!r.required||null!=r.default,"Attribute '".concat(e,"' is required in config")),n(null!=r.type,"Type in config definition is required"),r.type){case"string":n(p.isString(r.default),"Default for '".concat(e,"' must be string"));break;case"number":n(p.isNumber(r.default),"Default for '".concat(e,"' must be number"));break;case"boolean":n(p.isBoolean(r.default),"Default for '".concat(e,"' must be boolean"));break;case"integer":n(p.isInteger(r.default),"Default for '".concat(e,"' must be integer"));break;case"json":n(p.isString(r.default),"Default for '".concat(e,"' must be JSON string"));try{JSON.parse(r.default)}catch(t){n.fail("Default for '".concat(e,"' is not valid JSON"))}break;case"password":n(p.isString(r.default),"Default for '".concat(e,"' must be string"))}Reflect.defineProperty(t,e,{enumerable:!0,configurable:!0,writable:!1,value:r.default})}(c,o[c])}},{key:"root",get:function(){return this.Module.prototype.ROOT||"."}}]),i}(t),g.object={},f(l=d,"object",[c],(b=(b=Object.getOwnPropertyDescriptor(l,"object"))?b.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return b}}),l),f(l.prototype,"root",[a],Object.getOwnPropertyDescriptor(l.prototype,"root"),l.prototype),f(l.prototype,"defineConfigProperties",[u],Object.getOwnPropertyDescriptor(l.prototype,"defineConfigProperties"),l.prototype),r=l))||r}))}(i=function(n){var i=n.NS,c=i.CONFIGURATION,a=i.initializeMixin,u=i.meta,l=i.property,p=i.inject;n.defineMixin("/mixins/ConfigurableMixin.js",(function(n){var i,y,b,g,h,v,m,O;return i=p("Factory<".concat(c,">")),a((O=m=function(n){o(c,n);var i=d(c);function c(){var n;e(this,c);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=i.call.apply(i,[this].concat(a)),t(n,"_configurableI",h,r(n)),t(n,"_configurationFactory",v,r(n)),n}return s(c,[{key:"configs",get:function(){return this._configurationFactory()}}]),c}(n),m.object={},f(b=O,"object",[u],(g=(g=Object.getOwnPropertyDescriptor(b,"object"))?g.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return g}}),b),h=f(b.prototype,"_configurableI",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ConfigurableInterface"}}),v=f(b.prototype,"_configurationFactory",[i,l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f(b.prototype,"configs",[l],Object.getOwnPropertyDescriptor(b.prototype,"configs"),b.prototype),y=b))||y}))}(i=function(n){var i,c,a,l,p,d,h,v,m,O,w,P,j=n.NS,D=j.PRODUCTION,_=j.DEVELOPMENT,R=j.ENV,x=j.Proxy,k=j.assert,z=j.initialize,S=j.partOf,N=j.meta,C=j.property,M=j.method,I=j.nameBy,F=j.Utils,A=F._,T=F.assign;z(i=S(n)((P=w=function(n){o(c,n);var i=b(c);function c(){var n;e(this,c);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=i.call.apply(i,[this].concat(a)),t(n,"_configI",p,r(n)),t(n,"_name",d,r(n)),t(n,"_description",h,r(n)),t(n,"_license",v,r(n)),t(n,"_version",m,r(n)),t(n,"_keywords",O,r(n)),n}return s(c,[{key:"defineConfigProperties",value:function(){var t=this,e="".concat(this.root,"/").concat(this.manifestPath),r=this.ApplicationModule.require(e);this._name=r.name,this._description=r.description,this._license=r.license,this._version=r.version,this._keywords=r.keywords;var n=r.configuration,i="".concat(this.root,"/").concat(this.configPath),o=this.ApplicationModule.require(i),c=T({},n,o);for(var a in c)g.call(c,a)&&function(e,r){switch(k(null!=r.description,"Description in config definition is required"),k(!r.required||null!=r.default,"Attribute '".concat(e,"' is required in config")),k(null!=r.type,"Type in config definition is required"),r.type){case"string":k(A.isString(r.default),"Default for '".concat(e,"' must be string"));break;case"number":k(A.isNumber(r.default),"Default for '".concat(e,"' must be number"));break;case"boolean":k(A.isBoolean(r.default),"Default for '".concat(e,"' must be boolean"));break;case"integer":k(A.isInteger(r.default),"Default for '".concat(e,"' must be integer"));break;case"json":k(A.isString(r.default)||A.isPlainObject(r.default),"Default for '".concat(e,"' must be JSON string or js object"));try{A.isString(r.default)&&JSON.parse(r.default)}catch(t){k.fail("Default for '".concat(e,"' is not valid JSON"))}break;case"password":k(A.isString(r.default),"Default for '".concat(e,"' must be string"))}Reflect.defineProperty(t,e,{enumerable:!0,configurable:!0,writable:!1,value:"json"===r.type&&A.isString(r.default)?JSON.parse(r.default):r.default})}(a,c[a])}},{key:"onRegister",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=y(u(c.prototype),"onRegister",this)).call.apply(t,[this].concat(r)),this.defineConfigProperties()}},{key:"root",get:function(){return this.getData()||"."}},{key:"environment",get:function(){return"production"===R?D:_}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"license",get:function(){return this._license}},{key:"version",get:function(){return this._version}},{key:"keywords",get:function(){return this._keywords}},{key:"manifestPath",get:function(){return"package.json"}},{key:"configPath",get:function(){return"configs/".concat(this.environment)}}]),c}(x),w.__filename="/proxies/Configuration.js",w.object={},f(c=P,"__filename",[I],(a=(a=Object.getOwnPropertyDescriptor(c,"__filename"))?a.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return a}}),c),f(c,"object",[N],(l=(l=Object.getOwnPropertyDescriptor(c,"object"))?l.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return l}}),c),p=f(c.prototype,"_configI",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ConfigurationInterface"}}),f(c.prototype,"root",[C],Object.getOwnPropertyDescriptor(c.prototype,"root"),c.prototype),f(c.prototype,"environment",[C],Object.getOwnPropertyDescriptor(c.prototype,"environment"),c.prototype),d=f(c.prototype,"_name",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f(c.prototype,"_description",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=f(c.prototype,"_license",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f(c.prototype,"_version",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=f(c.prototype,"_keywords",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f(c.prototype,"name",[C],Object.getOwnPropertyDescriptor(c.prototype,"name"),c.prototype),f(c.prototype,"description",[C],Object.getOwnPropertyDescriptor(c.prototype,"description"),c.prototype),f(c.prototype,"license",[C],Object.getOwnPropertyDescriptor(c.prototype,"license"),c.prototype),f(c.prototype,"version",[C],Object.getOwnPropertyDescriptor(c.prototype,"version"),c.prototype),f(c.prototype,"keywords",[C],Object.getOwnPropertyDescriptor(c.prototype,"keywords"),c.prototype),f(c.prototype,"manifestPath",[C],Object.getOwnPropertyDescriptor(c.prototype,"manifestPath"),c.prototype),f(c.prototype,"configPath",[C],Object.getOwnPropertyDescriptor(c.prototype,"configPath"),c.prototype),f(c.prototype,"defineConfigProperties",[M],Object.getOwnPropertyDescriptor(c.prototype,"defineConfigProperties"),c.prototype),f(c.prototype,"onRegister",[M],Object.getOwnPropertyDescriptor(c.prototype,"onRegister"),c.prototype),i=c))||i)}(i=c((_=D=function(n){o(c,n);var i=O(c);function c(){var n;e(this,c);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=i.call.apply(i,[this].concat(a)),t(n,"CONFIGURATION",j,r(n)),n}return c}(n),D.object={},f(w=_,"object",[a],(P=(P=Object.getOwnPropertyDescriptor(w,"object"))?P.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return P}}),w),j=f(w.prototype,"CONFIGURATION",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"ConfigurationProxy"}}),i=w))||i)||i)||i)||i)||i)||i}]};
